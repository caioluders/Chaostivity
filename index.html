<!DOCTYPE html>
<html>
<img src="static/images/PrintButton.png" id="print_btn">
<img src="static/images/SaveButton.png" id="save_btn">
<img src="static/images/HelpButton.png" id="help_btn">
<img src="static/images/ReloadButton.png" id="reload_btn">
<link type="text/css" rel="stylesheet" href="static/styles/style.css" />  
<link rel="stylesheet" type="text/css" href="static/styles/print_style.css" media="print" />
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css"/>
<body>
<div id="top_div">
	<canvas id="wtf" onclick="wtf()" width="80" height="80" ></canvas>
	<canvas id="reload" width="80" height="80" onclick="draw(document.getElementById('density').value,document.getElementById('opacity').value)"></canvas>
	<canvas id="title_background" width="250" height="100"></canvas>
	<a id="download_out"><canvas id="download" width="80" height="80"></canvas></a>
	<canvas onclick="window.print()" width="80" height="80" id="print_it"></canvas>
</div>
<div id="mid_div">
	<canvas id="pareidolia" width="600" height="400" >	Your browser does not support the HTML5 canvas tag , sorry :'( </canvas>
</div>
<div id="foot_div">
	Densidade<input id="density" type="range" min="0" max="100" onchange="draw(this.value,document.getElementById('opacity').value)" />
	Opacidade<input id="opacity" type="range" min="0" max="100" onchange="draw(document.getElementById('density').value,this.value)" />
</div>

<script>
function draw( d , o ) {
	var c = document.getElementById("pareidolia");
	var ctx = c.getContext("2d");
	ctx.clearRect(0, 0, c.width, c.height);
	ctx.save()
	ctx.globalAlpha = parseInt(o)/100
	
	var ss = document.styleSheets;
    for (var i = 0, max = ss.length; i < max; i++) {
        if (ss[i].href == "static/styles/print_style.css") {
        	console.log("wtf") ;
            c.width = 2480;
        	c.height = 3508;
        }
    }

	for (var i = 0 ; i < parseInt(d) ; i++ ) {
		ctx.beginPath();
		ctx.moveTo( Math.floor((Math.random() * c.width)) ,Math.floor((Math.random() * c.height)));
		ctx.lineTo(Math.floor((Math.random() * c.width)),Math.floor((Math.random() * c.height)));
		ctx.lineWidth = 0.5;
		ctx.globalAlpha = parseInt(o)/100
		ctx.stroke();
	}

	for (var i = 0 ; i < parseInt(d) ; i++ ) {
		ctx.beginPath();
		ctx.moveTo( Math.floor((Math.random() * c.width)) ,Math.floor((Math.random() * c.height)));
		ctx.bezierCurveTo(Math.floor((Math.random() * c.width)), Math.floor((Math.random() * c.height)), Math.floor((Math.random() * c.width)), Math.floor((Math.random() * c.height)), Math.floor((Math.random() * c.width)), Math.floor((Math.random() * c.height)));
		ctx.lineWidth = 0.5;
		ctx.globalAlpha = parseInt(o)/100
		ctx.stroke();
	}

	ctx.restore()
}

function downloadCanvas(link, canvasId, filename) {
    link.href = document.getElementById(canvasId).toDataURL();
    link.download = filename;
}

document.getElementById('download_out').addEventListener('click', function() {
    downloadCanvas(this, 'pareidolia', 'pareidolia.png');
}, false);

function wtf() {
	alert("I don't know WTF IS THIS !");
}

function select_print(t) {
	console.log(t) ;
}

CanvasRenderingContext2D.prototype.roundRect = function (x, y, width, height, radius, fill, stroke) {
    var cornerRadius = { upperLeft: 0, upperRight: 0, lowerLeft: 0, lowerRight: 0 };
    if (typeof stroke == "undefined") {
        stroke = true;
    }
    if (typeof radius === "object") {
        for (var side in radius) {
            cornerRadius[side] = radius[side];
        }
    }

    this.beginPath();
    this.moveTo(x + cornerRadius.upperLeft, y);
    this.lineTo(x + width - cornerRadius.upperRight, y);
    this.quadraticCurveTo(x + width, y, x + width, y + cornerRadius.upperRight);
    this.lineTo(x + width, y + height - cornerRadius.lowerRight);
    this.quadraticCurveTo(x + width, y + height, x + width - cornerRadius.lowerRight, y + height);
    this.lineTo(x + cornerRadius.lowerLeft, y + height);
    this.quadraticCurveTo(x, y + height, x, y + height - cornerRadius.lowerLeft);
    this.lineTo(x, y + cornerRadius.upperLeft);
    this.quadraticCurveTo(x, y, x + cornerRadius.upperLeft, y);
    this.closePath();
    if (stroke) {
        this.stroke();
    }
    if (fill) {
        this.fill();
    }
} 

var canvas = document.getElementById("title_background");
var c = canvas.getContext("2d");

c.fillStyle = "#8DA552";
c.roundRect(0, 0, 250, 100, {lowerLeft:10,lowerRight:10}, true, false);

for ( var i = 1 ; i < 100 ; i+= 1 ) {
	c.shadowOffsetX = 50+i;
	c.shadowOffsetY = 80+i;
	c.shadowColor = "#718147" ;
	c.fillStyle = undefined ;
	c.font = "30px ChunkFive-Roman";
	c.fillText("Chaostivity", -10, -10);
}
c.fillStyle = "#FFF6E4";
c.font = "30px ChunkFive-Roman";
c.fillText("Chaostivity", 40, 70);


var canvas1 = document.getElementById('wtf');

canvas1.addEventListener('mouseover', function() {
        hover_wtf() ;
});

canvas1.addEventListener('mouseout', function() {
        draw_wtf() ;
});

var canvas2 = document.getElementById('reload');


canvas2.addEventListener('mouseover', function() {
        hover_reload() ;
});

canvas2.addEventListener('mouseout', function() {
        draw_reload() ;
});


var canvas3 = document.getElementById('download');

canvas3.addEventListener('mouseover', function() {
        hover_save() ;
});

canvas3.addEventListener('mouseout', function() {
        draw_save() ;
});

var canvas4 = document.getElementById('print_it');

canvas4.addEventListener('mouseover', function() {
        hover_print() ;
});

canvas4.addEventListener('mouseout', function() {
        draw_print() ;
});

function hover_wtf() {
	var canvas1 = document.getElementById('wtf');
	var context = canvas1.getContext('2d');
	context.clearRect(0, 0, canvas1.width, canvas1.height);
	var centerX = canvas1.width / 2;
	var centerY = canvas1.height / 2;
	var radius = 70;

	context.beginPath();
	context.arc(centerX, centerY, radius, 0, 2 * Math.PI, false);
	context.fillStyle = '#718147';
	context.fill();
	context.fillStyle = undefined;
	var img = document.getElementById("help_btn");

	context.drawImage(img, ((80-45)/2), ((80-44)/2));
}

function draw_wtf() {
	var canvas1 = document.getElementById('wtf');
	var context = canvas1.getContext('2d');
	var centerX = canvas1.width / 2;
	var centerY = canvas1.height / 2;
	var radius = 70;

	context.beginPath();
	context.arc(centerX, centerY, radius, 0, 2 * Math.PI, false);
	context.fillStyle = '#8DA552';
	context.fill();
	var img = document.getElementById("help_btn");

	for ( var i = 1 ; i < 100 ; i+= 1 ) {
		context.shadowOffsetX = ((80-45)/2)+31+i;
		context.shadowOffsetY = ((80-44)/2)+31+i;
		context.shadowColor = "#718147" ;
		context.fillStyle = undefined ;
		context.drawImage(img, ((80-45)/2)-50, ((80-44)/2)-50);
	}
	context.drawImage(img, (80-45)/2, (80-44)/2);
}

function draw_reload() {
	var canvas2 = document.getElementById('reload');
	var context = canvas2.getContext('2d');
	var centerX = canvas2.width / 2;
	var centerY = canvas2.height / 2;
	var radius = 70;

	context.beginPath();
	context.arc(centerX, centerY, radius, 0, 2 * Math.PI, false);
	context.fillStyle = '#8DA552';
	context.fill();
	var img = document.getElementById("reload_btn");

	for ( var i = 1 ; i < 100 ; i+= 1 ) {
		context.shadowOffsetX = ((80-45)/2)+31+i;
		context.shadowOffsetY = ((80-44)/2)+31+i;
		context.shadowColor = "#718147" ;
		context.fillStyle = undefined ;
		context.drawImage(img, ((80-45)/2)-50, ((80-44)/2)-50);
	}

	context.drawImage(img, (80-45)/2, (80-44)/2);
}

function hover_reload() {
	var canvas2 = document.getElementById('reload');
	var context = canvas2.getContext('2d');
	var centerX = canvas2.width / 2;
	var centerY = canvas2.height / 2;
	var radius = 70;

	context.beginPath();
	context.arc(centerX, centerY, radius, 0, 2 * Math.PI, false);
	context.fillStyle = '#718147';
	context.fill();
	var img = document.getElementById("reload_btn");

	context.drawImage(img, (80-45)/2, (80-44)/2);
}

function draw_save() {
	var canvas3 = document.getElementById('download');
	var context = canvas3.getContext('2d');
	var centerX = canvas3.width / 2;
	var centerY = canvas3.height / 2;
	var radius = 70;

	context.beginPath();
	context.arc(centerX, centerY, radius, 0, 2 * Math.PI, false);
	context.fillStyle = '#8DA552';
	context.fill();

	var imageObj3 = new Image();
	var img = document.getElementById("save_btn");


	for ( var i = 1 ; i < 100 ; i+= 1 ) {
		context.shadowOffsetX = ((80-45)/2)+31+i;
		context.shadowOffsetY = ((80-44)/2)+31+i;
		context.shadowColor = "#718147" ;
		context.fillStyle = undefined ;
		context.drawImage(img, ((80-45)/2)-50, ((80-44)/2)-50);
	}

	context.drawImage(img, (80-45)/2, (80-44)/2);
}

function hover_save() {
	var canvas3 = document.getElementById('download');
	var context = canvas3.getContext('2d');
	var centerX = canvas3.width / 2;
	var centerY = canvas3.height / 2;
	var radius = 70;

	context.beginPath();
	context.arc(centerX, centerY, radius, 0, 2 * Math.PI, false);
	context.fillStyle = '#718147';
	context.fill();

	var imageObj3 = new Image();
	var img = document.getElementById("save_btn");

	context.drawImage(img, (80-45)/2, (80-44)/2);
}

function draw_print() {
	var canvas4 = document.getElementById('print_it');
	var context = canvas4.getContext('2d');
	var centerX = canvas4.width / 2;
	var centerY = canvas4.height / 2;
	var radius = 70;

	context.beginPath();
	context.arc(centerX, centerY, radius, 0, 2 * Math.PI, false);
	context.fillStyle = '#8DA552';
	context.fill();
	var img = document.getElementById("print_btn");

	for ( var i = 1 ; i < 100 ; i+= 1 ) {
		context.shadowOffsetX = ((80-45)/2)+30+i;
		context.shadowOffsetY = ((80-44)/2)+30.5+i;
		context.shadowColor = "#718147" ;
		context.fillStyle = undefined ;
		context.drawImage(img, ((80-45)/2)-50, ((80-44)/2)-50);
	}

	context.drawImage(img, (80-45)/2, (80-44)/2);
}

function hover_print() {
	var canvas4 = document.getElementById('print_it');
	var context = canvas4.getContext('2d');
	var centerX = canvas4.width / 2;
	var centerY = canvas4.height / 2;
	var radius = 70;

	context.beginPath();
	context.arc(centerX, centerY, radius, 0, 2 * Math.PI, false);
	context.fillStyle = '#718147';
	context.fill();
	var img = document.getElementById("print_btn");

	context.drawImage(img, (80-45)/2, (80-44)/2);
}

draw(50) ;

draw_reload();
draw_wtf() ;
draw_save() ;
draw_print() ;

</script>

</body>
</html>
